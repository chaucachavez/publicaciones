function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){return function(){var t,o=_getPrototypeOf(e);if(_isNativeReflectConstruct()){var a=_getPrototypeOf(this).constructor;t=Reflect.construct(o,arguments,a)}else t=o.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{GPUG:function(e,t,o){"use strict";o.d(t,"a",(function(){return u}));var a=o("tk/3"),i=o("IRgW"),n=(o("XNiG"),o("lJxs")),r=(o("0np6"),o("fXoL")),c=o("17qS"),u=function(){var e=function(e){_inherits(o,e);var t=_createSuper(o);function o(e,a){var i;return _classCallCheck(this,o),(i=t.call(this)).http=e,i._subirArchivoService=a,console.log("ProductoService listo!"),i}return _createClass(o,[{key:"index",value:function(e){return this.getQuery("productos",e)}},{key:"show",value:function(e,t){return this.getQuery("productos/".concat(e),t)}},{key:"create",value:function(e){return this.postQuery("productos",e).pipe(Object(n.a)((function(e){return e})))}},{key:"update",value:function(e,t){return this.putQuery("productos/".concat(e),t).pipe(Object(n.a)((function(e){return e})))}},{key:"delete",value:function(e,t){return this.deleteQuery("productos/".concat(e),t).pipe(Object(n.a)((function(e){return e.data})))}},{key:"updateImg",value:function(e,t){return this._subirArchivoService.subirArchivo(t,"/productos/subirimagen/"+e)}},{key:"exportExcel",value:function(e){return this.postDownload("productos/export/excel",e)}},{key:"exportTemplateExcel",value:function(){return this.postDownload("productos/plantilla/excel")}}]),o}(i.a);return e.\u0275fac=function(t){return new(t||e)(r.ac(a.b),r.ac(c.a))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},Iab2:function(e,t,o){(function(o){var a,i;void 0===(i="function"==typeof(a=function(){"use strict";function t(e,t,o){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){r(a.response,t,o)},a.onerror=function(){console.error("could not download file")},a.send()}function a(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(o)}}var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof o&&o.global===o?o:void 0,r=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype?function(e,o,r){var c=n.URL||n.webkitURL,u=document.createElement("a");u.download=o=o||e.name||"download",u.rel="noopener","string"==typeof e?(u.href=e,u.origin===location.origin?i(u):a(u.href)?t(e,o,r):i(u,u.target="_blank")):(u.href=c.createObjectURL(e),setTimeout((function(){c.revokeObjectURL(u.href)}),4e4),setTimeout((function(){i(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,o,n){if(o=o||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,n),o);else if(a(e))t(e,o,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){i(r)}))}}:function(e,o,a,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,o,a);var r="application/octet-stream"===e.type,c=/constructor/i.test(n.HTMLElement)||n.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||r&&c)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},l.readAsDataURL(e)}else{var s=n.URL||n.webkitURL,d=s.createObjectURL(e);i?i.location=d:location.href=d,i=null,setTimeout((function(){s.revokeObjectURL(d)}),4e4)}});n.saveAs=r.saveAs=r,e.exports=r})?a.apply(t,[]):a)||(e.exports=i)}).call(this,o("yLpj"))},LazK:function(e,t,o){"use strict";o.d(t,"a",(function(){return c}));var a=o("IRgW"),i=o("lJxs"),n=o("fXoL"),r=o("tk/3"),c=function(){var e=function(e){_inherits(o,e);var t=_createSuper(o);function o(e){var a;return _classCallCheck(this,o),(a=t.call(this)).http=e,a}return _createClass(o,[{key:"index",value:function(e){return this.getQuery("categorias",e)}},{key:"show",value:function(e,t){return this.getQuery("categorias/".concat(e),t)}},{key:"create",value:function(e){return this.postQuery("categorias",e).pipe(Object(i.a)((function(e){return e})))}},{key:"update",value:function(e,t){return this.putQuery("categorias/".concat(e),t).pipe(Object(i.a)((function(e){return e})))}},{key:"delete",value:function(e,t){return this.deleteQuery("categorias/".concat(e),t).pipe(Object(i.a)((function(e){return e})))}}]),o}(a.a);return e.\u0275fac=function(t){return new(t||e)(n.ac(r.b))},e.\u0275prov=n.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},dGNC:function(e,t,o){"use strict";o.d(t,"a",(function(){return de}));var a,i=o("3Pt+"),n=o("5mnX"),r=o.n(n),c=o("sF+I"),u=o.n(c),l=o("LgSP"),s=o.n(l),d=o("R9fh"),b=o.n(d),m=o("Kj3r"),f=o("vkgz"),p=o("eIep"),g=o("nYR2"),v=o("0IaG"),h=o("fXoL"),y=o("GPUG"),V=o("g8hX"),w=o("LazK"),W=o("IRgW"),x=o("tk/3"),C=((a=function(e){_inherits(o,e);var t=_createSuper(o);function o(e){var a;return _classCallCheck(this,o),(a=t.call(this)).http=e,a}return _createClass(o,[{key:"index",value:function(e){return this.getQuery("catalogos",e)}}]),o}(W.a)).\u0275fac=function(e){return new(e||a)(h.ac(x.b))},a.\u0275prov=h.Mb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),I=o("dNgK"),k=o("eUUZ"),_=o("YMqD"),G=o("yCEk"),S=o("ofXK"),R=o("6JgD"),L=o("XiUz"),E=o("/t3+"),O=o("bTqV"),F=o("NFeN"),T=o("VX/1"),j=o("wZkO"),P=o("kmnG"),A=o("qFsG"),q=o("d3UM"),Q=o("/1cH"),N=o("FKr1"),M=o("Xa2L"),U=["nombre"];function D(e,t){1&e&&h.Rb(0,"vex-loading")}function X(e,t){1&e&&(h.Wb(0,"mat-error"),h.Gc(1," Es requerido "),h.Vb())}function B(e,t){if(1&e&&(h.Wb(0,"mat-option",38),h.Gc(1),h.Vb()),2&e){var o=t.$implicit;h.oc("value",o.codigo),h.Cb(1),h.Jc(" ",o.codigo," - ",o.nombre," ")}}function z(e,t){1&e&&(h.Wb(0,"mat-error"),h.Gc(1," Es requerido "),h.Vb())}function H(e,t){1&e&&(h.Wb(0,"mat-error"),h.Gc(1," Es requerido "),h.Vb())}function J(e,t){if(1&e&&(h.Wb(0,"mat-option",38),h.Gc(1),h.Vb()),2&e){var o=t.$implicit;h.oc("value",o.idimpuesto),h.Cb(1),h.Ic(" ",o.nombre," ")}}function K(e,t){if(1&e&&(h.Wb(0,"mat-option",38),h.Gc(1),h.Vb()),2&e){var o=t.$implicit;h.oc("value",o.moneda),h.Cb(1),h.Ic(" ",o.nombre," ")}}function $(e,t){1&e&&(h.Wb(0,"mat-form-field",27),h.Wb(1,"mat-label"),h.Gc(2,"Valor venta"),h.Vb(),h.Rb(3,"input",39),h.Vb())}function Y(e,t){1&e&&(h.Wb(0,"mat-form-field",27),h.Wb(1,"mat-label"),h.Gc(2,"Precio venta"),h.Vb(),h.Rb(3,"input",40),h.Vb())}function Z(e,t){if(1&e&&(h.Wb(0,"i"),h.Gc(1),h.Vb()),2&e){var o=h.ic(3);h.Cb(1),h.Ic(" (",o.productoForm.get("codigosunat").value,") ")}}function ee(e,t){1&e&&(h.Wb(0,"mat-option",41),h.Rb(1,"mat-spinner",42),h.Vb())}function te(e,t){if(1&e&&(h.Wb(0,"mat-option",38),h.Wb(1,"div",45),h.Wb(2,"small"),h.Gc(3),h.Vb(),h.Wb(4,"div",46),h.Wb(5,"small",47),h.Gc(6),h.Vb(),h.Vb(),h.Vb(),h.Vb()),2&e){var o=t.$implicit;h.oc("value",o),h.Cb(3),h.Hc(o.nombre),h.Cb(3),h.Hc(o.codigo)}}function oe(e,t){if(1&e&&(h.Ub(0),h.Ec(1,te,7,3,"mat-option",22),h.Wb(2,"div",43),h.Wb(3,"small",44),h.Gc(4),h.Vb(),h.Vb(),h.Tb()),2&e){var o=h.ic(3);h.Cb(1),h.oc("ngForOf",o.searchResult.data),h.Cb(3),h.Jc("Mostrando ",o.searchResult.to," de ",o.searchResult.total," resultados.")}}function ae(e,t){if(1&e&&h.Rb(0,"mat-icon",48),2&e){var o=h.ic(3);h.oc("icIcon",o.icArrowDropDown)}}function ie(e,t){if(1&e){var o=h.Xb();h.Wb(0,"mat-icon",49),h.ec("click",(function(){return h.wc(o),h.ic(3).catalogo.setValue("")})),h.Vb()}if(2&e){var a=h.ic(3);h.oc("icIcon",a.icClose)}}function ne(e,t){if(1&e&&(h.Wb(0,"mat-option",38),h.Gc(1),h.Vb()),2&e){var o=t.$implicit;h.oc("value",o.idcategoria),h.Cb(1),h.Jc(" ",o.codigo," - ",o.nombre," ")}}function re(e,t){if(1&e){var o=h.Xb();h.Wb(0,"div"),h.Wb(1,"div",17),h.Wb(2,"mat-form-field",18),h.Wb(3,"mat-label"),h.Gc(4,"Nombre"),h.Vb(),h.Rb(5,"input",19,20),h.Ec(7,X,2,0,"mat-error",0),h.Vb(),h.Vb(),h.Wb(8,"div",17),h.Wb(9,"mat-form-field",18),h.Wb(10,"mat-label"),h.Gc(11,"Medida"),h.Vb(),h.Wb(12,"mat-select",21),h.Ec(13,B,2,3,"mat-option",22),h.Vb(),h.Ec(14,z,2,0,"mat-error",0),h.Vb(),h.Wb(15,"mat-form-field",18),h.Wb(16,"mat-label"),h.Gc(17,"Sku (C\xf3digo \xfanico del producto/servicio)"),h.Vb(),h.Rb(18,"input",23),h.Ec(19,H,2,0,"mat-error",0),h.Vb(),h.Vb(),h.Wb(20,"div",17),h.Wb(21,"mat-form-field",24),h.Wb(22,"mat-label"),h.Gc(23,"Impuesto venta"),h.Vb(),h.Wb(24,"mat-select",25),h.Ec(25,J,2,2,"mat-option",22),h.Vb(),h.Vb(),h.Wb(26,"div",26),h.Wb(27,"mat-form-field",27),h.Wb(28,"mat-label"),h.Gc(29,"Moneda"),h.Vb(),h.Wb(30,"mat-select",28),h.Ec(31,K,2,2,"mat-option",22),h.Vb(),h.Vb(),h.Wb(32,"div",29),h.Ec(33,$,4,0,"mat-form-field",30),h.Ec(34,Y,4,0,"mat-form-field",30),h.Vb(),h.Vb(),h.Vb(),h.Wb(35,"div",17),h.Wb(36,"mat-form-field",24),h.Wb(37,"mat-label"),h.Wb(38,"span"),h.Gc(39,"C\xf3digo Sunat"),h.Vb(),h.Ec(40,Z,2,1,"i",0),h.Vb(),h.Rb(41,"input",31),h.Wb(42,"mat-autocomplete",32,33),h.ec("optionSelected",(function(e){return h.wc(o),h.ic(2).autocompletadoCatalogoSelected(e.option.value)})),h.Ec(44,ee,2,0,"mat-option",34),h.Ec(45,oe,5,3,"ng-container",0),h.Vb(),h.Ec(46,ae,1,1,"mat-icon",35),h.Ec(47,ie,1,1,"mat-icon",36),h.Vb(),h.Wb(48,"mat-form-field",24),h.Wb(49,"mat-label"),h.Gc(50,"Categor\xeda"),h.Vb(),h.Wb(51,"mat-select",37),h.Wb(52,"mat-option"),h.Gc(53,"(Sin categoria)"),h.Vb(),h.Ec(54,ne,2,3,"mat-option",22),h.Vb(),h.Vb(),h.Vb(),h.Vb()}if(2&e){var a=h.uc(43),i=h.ic(2);h.Cb(7),h.oc("ngIf",i.productoForm.get("nombre").hasError("required")),h.Cb(6),h.oc("ngForOf",i.unidadMedidas),h.Cb(1),h.oc("ngIf",i.productoForm.get("unidadmedida").hasError("required")),h.Cb(5),h.oc("ngIf",i.productoForm.get("codigo").hasError("required")),h.Cb(6),h.oc("ngForOf",i.impuestos),h.Cb(6),h.oc("ngForOf",i.monedas),h.Cb(2),h.oc("ngIf",!i.settings.preciounitario),h.Cb(1),h.oc("ngIf",i.settings.preciounitario),h.Cb(6),h.oc("ngIf",i.productoForm.get("codigosunat").value),h.Cb(1),h.oc("matAutocomplete",a)("formControl",i.catalogo),h.Cb(1),h.oc("displayWith",i.displaySearchCatalogo),h.Cb(2),h.oc("ngIf",i.isLoadingSearch),h.Cb(1),h.oc("ngIf",!i.isLoadingSearch),h.Cb(1),h.oc("ngIf",!i.catalogo.value),h.Cb(1),h.oc("ngIf",i.catalogo.value),h.Cb(7),h.oc("ngForOf",i.categorias)}}function ce(e,t){if(1&e&&(h.Wb(0,"div"),h.Wb(1,"div",50),h.Wb(2,"div",51),h.Wb(3,"h3"),h.Gc(4),h.Vb(),h.Wb(5,"a",52),h.Gc(6," https://platanitos.com/puma-nova-2-wn-s-negro-morado-171649 "),h.Vb(),h.Vb(),h.Wb(7,"div",53),h.Wb(8,"div",54),h.Gc(9,"P\xfablico/Privado"),h.Vb(),h.Vb(),h.Vb(),h.Wb(10,"fieldset",55),h.Wb(11,"legend"),h.Gc(12,"Im\xe1genes"),h.Vb(),h.Wb(13,"div"),h.Gc(14,"Img1 (edit) (View)"),h.Vb(),h.Wb(15,"div"),h.Gc(16,"Img2 (edit) (View) (portada)"),h.Vb(),h.Wb(17,"div"),h.Gc(18,"Img3 (edit) (View) "),h.Vb(),h.Wb(19,"div"),h.Rb(20,"input",56),h.Vb(),h.Vb(),h.Wb(21,"fieldset",55),h.Wb(22,"legend"),h.Gc(23,"Precio"),h.Vb(),h.Wb(24,"table",57),h.Wb(25,"tbody"),h.Wb(26,"tr"),h.Wb(27,"td",58),h.Gc(28,"Precio actual:"),h.Vb(),h.Wb(29,"td",59),h.Gc(30,"S/ 80.00"),h.Vb(),h.Vb(),h.Wb(31,"tr"),h.Wb(32,"td"),h.Wb(33,"del"),h.Gc(34,"Precio anterior"),h.Vb(),h.Gc(35,":"),h.Vb(),h.Wb(36,"td"),h.Gc(37,"S/ 90.00"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(38,"fieldset",55),h.Wb(39,"legend"),h.Gc(40,"Informaci\xf3n"),h.Vb(),h.Gc(41," Lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum Lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum "),h.Vb(),h.Wb(42,"fieldset",55),h.Wb(43,"legend"),h.Gc(44,"Caracter\xedsticas"),h.Vb(),h.Wb(45,"table",57),h.Wb(46,"tbody"),h.Wb(47,"tr"),h.Wb(48,"td",58),h.Wb(49,"i"),h.Gc(50,"Fabricante"),h.Vb(),h.Vb(),h.Wb(51,"td",59),h.Gc(52,"Insumos de Riego"),h.Vb(),h.Vb(),h.Wb(53,"tr"),h.Wb(54,"td"),h.Wb(55,"i"),h.Gc(56,"Marca"),h.Vb(),h.Vb(),h.Wb(57,"td"),h.Gc(58,"Insumos de Riego"),h.Vb(),h.Vb(),h.Wb(59,"tr"),h.Wb(60,"td"),h.Wb(61,"i"),h.Gc(62,"Modelo"),h.Vb(),h.Vb(),h.Wb(63,"td"),h.Gc(64,"63mm X 1/2"),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Vb(),h.Wb(65,"fieldset",55),h.Gc(66," \xbfEs un producto nuevo? SI/NO "),h.Vb(),h.Wb(67,"fieldset",60),h.Wb(68,"legend"),h.Gc(69,"Youtube(Opcional)"),h.Vb(),h.Rb(70,"iframe",61),h.Vb(),h.Vb()),2&e){var o=h.ic(2);h.Cb(4),h.Ic(" ",o.productoForm.get("nombre").value," ")}}function ue(e,t){1&e&&(h.Wb(0,"div"),h.Gc(1," Stock de productos por local "),h.Vb())}function le(e,t){if(1&e){var o=h.Xb();h.Wb(0,"form",2),h.ec("ngSubmit",(function(){return h.wc(o),h.ic().save()})),h.Wb(1,"div",3),h.Wb(2,"mat-toolbar",4),h.Wb(3,"h2",5),h.Gc(4),h.Vb(),h.Wb(5,"button",6),h.Rb(6,"mat-icon",7),h.Vb(),h.Vb(),h.Wb(7,"mat-tab-group",8,9),h.ec("selectedTabChange",(function(e){return h.wc(o),h.ic().handleTabChange(e)})),h.Rb(9,"mat-tab",10),h.Rb(10,"mat-tab",11),h.Rb(11,"mat-tab",12),h.Vb(),h.Vb(),h.Wb(12,"mat-dialog-content",13),h.Ec(13,re,55,17,"div",0),h.Ec(14,ce,71,1,"div",0),h.Ec(15,ue,2,0,"div",0),h.Vb(),h.Wb(16,"mat-dialog-actions",14),h.Wb(17,"button",15),h.Gc(18,"CERRAR"),h.Vb(),h.Wb(19,"button",16),h.Gc(20,"GUARDAR"),h.Vb(),h.Vb(),h.Vb()}if(2&e){var a=h.ic();h.oc("formGroup",a.productoForm),h.Cb(4),h.Hc(a.dialogTitle),h.Cb(2),h.oc("icIcon",a.icClose),h.Cb(1),h.oc("selectedIndex",a.activeTabIndex)("color","accent")("backgroundColor","primary"),h.Cb(6),h.oc("ngIf",0===a.activeTabIndex),h.Cb(1),h.oc("ngIf",1===a.activeTabIndex),h.Cb(1),h.oc("ngIf",2===a.activeTabIndex),h.Cb(4),h.oc("disabled",a.productoForm.invalid||a.submitted)}}var se,de=((se=function(){function e(t,o,a,n,c,l,d,m,f,p){_classCallCheck(this,e),this._data=t,this.matDialogRef=o,this._productoService=a,this._unidadService=n,this._categoriaService=c,this._catalogoService=l,this.snackBar=d,this._datainicial=m,this._utils=f,this._entidadService=p,this.monedas=this._datainicial.monedas,this.impuestos=this._datainicial.impuestos,this.unidadMedidas=[],this.categorias=[],this.catalogo=new i.e,this.searchResult={data:null,to:null,total:null},this.isLoadingSearch=!1,this.icClose=r.a,this.icSearch=u.a,this.icLocalOffer=b.a,this.icArrowDropDown=s.a,this.activeTabIndex=0,this.action=t.action,this.dialogTitle=t.dialogTitle,"edit"===this.action?this.show():this.loading=!1,this.settings=this._entidadService.settings,console.log("this.settings",this.settings),this.listaUnidades(),this.listaCategorias()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.productoForm=this.createForm(),this.settings.preciounitario?this.productoForm.get("valorventa").setValidators(i.v.required):this.productoForm.get("costoventa").setValidators(i.v.required),"new"===this.action&&setTimeout((function(){e.nombreElement.nativeElement.focus()}),0),this.catalogo.valueChanges.pipe(Object(m.a)(300),Object(f.a)((function(){return e.isLoadingSearch=!0})),Object(p.a)((function(t){if(console.log("typeof data",typeof t),"string"==typeof t&&e.productoForm.get("codigosunat").setValue(null),"string"==typeof t&&t){console.log("get API CATALOGO");var o={page:1,pageSize:10,orderName:"nombre",orderSort:"asc"};return parseFloat(t)>0?o.likeCodigo=t:o.likeNombre=t,e._catalogoService.index(o).pipe(Object(g.a)((function(){return e.isLoadingSearch=!1})))}return e.isLoadingSearch=!1,[]}))).subscribe((function(t){e.searchResult=t}))}},{key:"handleTabChange",value:function(e){this.activeTabIndex=e.index}},{key:"listaUnidades",value:function(){var e=this;this._unidadService.unidades().subscribe((function(t){e.unidadMedidas=t.data}))}},{key:"listaCategorias",value:function(){var e=this;this._categoriaService.index().subscribe((function(t){e.categorias=t.data}))}},{key:"show",value:function(){var e=this;this.loading=!0,this._productoService.show(this._data.idproducto,{conRecurso:"catalogo"}).subscribe((function(t){e.loading=!1,e.inicializarProducto(t.data),t.data.catalogo&&e.catalogo.setValue({codigo:t.data.catalogo.codigo,nombre:t.data.catalogo.nombre})}))}},{key:"inicializarProducto",value:function(e){this.productoForm.setValue({idproducto:e.idproducto,nombre:e.nombre,moneda:e.moneda,costoventa:e.costoventa,valorventa:e.valorventa,idimpuesto:e.idimpuesto,destacado:"1"===e.destacado,unidadmedida:e.unidadmedida,codigo:e.codigo,codigosunat:e.codigosunat,idcategoria:e.idcategoria,imgportada:e.imgportada})}},{key:"createForm",value:function(){return new i.h({idproducto:new i.e(null),nombre:new i.e(null,[i.v.required]),codigo:new i.e(null,[i.v.required]),unidadmedida:new i.e(null,[i.v.required]),moneda:new i.e("PEN"),costoventa:new i.e(null),valorventa:new i.e(null),idimpuesto:new i.e(null,[i.v.required]),destacado:new i.e(!1),codigosunat:new i.e(null),idcategoria:new i.e(null),imgportada:new i.e(null)})}},{key:"seleccionImage",value:function(e){var t=this;if(e)if(-1!==e.type.indexOf("image")){this.imagenSubir=e;var o=new FileReader;o.readAsDataURL(e),o.onloadend=function(){return t.imagenTemp=o.result},this.cambiarImagen()}else this.imagenSubir=null;else this.imagenSubir=null}},{key:"cambiarImagen",value:function(){this._productoService.updateImg(this.productoForm.controls.idproducto.value,this.imagenSubir).then((function(e){})).catch((function(e){console.log(e)}))}},{key:"displaySearchCatalogo",value:function(e){return e?e.nombre:null}},{key:"autocompletadoCatalogoSelected",value:function(e){e&&this.productoForm.get("codigosunat").setValue(e.codigo)}},{key:"save",value:function(){var e,t=this;(e=this.productoForm.getRawValue()).destacado=e.destacado?"1":"0","new"===this.action&&(this.submitted=!0,this._productoService.create(e).subscribe((function(e){t.submitted=!1,t.snackBar.open("\xcdtem registrado.","Cerrar"),t.matDialogRef.close(e.data)}),(function(e){var o=t._utils.convertError(e);t.submitted=!1,t.snackBar.open(o,"Cerrar",{panelClass:["error-dialog"]})}))),this.submitted=!0,"edit"===this.action&&this._productoService.update(e.idproducto,e).subscribe((function(e){t.submitted=!1,t.snackBar.open("\xcdtem actualizado.","Cerrar"),t.matDialogRef.close(e.data)}),(function(e){var o=t._utils.convertError(e);t.submitted=!1,t.snackBar.open(o,"Cerrar",{panelClass:["error-dialog"]})}))}}]),e}()).\u0275fac=function(e){return new(e||se)(h.Qb(v.a),h.Qb(v.g),h.Qb(y.a),h.Qb(V.a),h.Qb(w.a),h.Qb(C),h.Qb(I.b),h.Qb(k.a),h.Qb(_.a),h.Qb(G.a))},se.\u0275cmp=h.Kb({type:se,selectors:[["vex-item-form"]],viewQuery:function(e,t){var o;1&e&&h.Nc(U,!0),2&e&&h.tc(o=h.fc())&&(t.nombreElement=o.first)},decls:2,vars:2,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["mat-dialog-title","","fxLayout","column"],["color","primary","fxLayout","row","fxLayoutAlign","start center"],["fxFlex","auto",1,"headline","m-0"],["mat-dialog-close","","mat-icon-button","","type","button",1,"text-secondary"],[3,"icIcon"],["fxFlex","auto",3,"selectedIndex","color","backgroundColor","selectedTabChange"],["tabGroup",""],["label","GENERAL"],["label","TIENDA VIRTUAL"],["label","STOCK"],["fxLayout","column"],["align","end"],["mat-button","","mat-dialog-close","","type","button"],["color","primary","mat-raised-button","","type","submit",3,"disabled"],["fxLayout","row","fxLayout.lt-sm","column","fxLayoutGap","16px","fxLayoutGap.lt-sm","0"],["appearance","standard","floatLabel","always","fxFlex","auto"],["matInput","","formControlName","nombre","maxlength","200","required",""],["nombre",""],["formControlName","unidadmedida","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","codigo","maxlength","16","required",""],["appearance","standard","floatLabel","always","fxFlex","50"],["formControlName","idimpuesto","required",""],["fxLayout","row","fxLayoutGap","8px","fxFlex","50"],["appearance","standard","floatLabel","always","fxFlex","auto",1,"vex-flex-form-field"],["formControlName","moneda"],["fxFlex","70"],["appearance","standard","floatLabel","always","class","vex-flex-form-field","fxFlex","auto",4,"ngIf"],["matInput","",3,"matAutocomplete","formControl"],["autoActiveFirstOption","","panelWidth","530px",3,"displayWith","optionSelected"],["auto","matAutocomplete"],["class","p-3","value","",4,"ngIf"],["matSuffix","",3,"icIcon",4,"ngIf"],["matSuffix","",3,"icIcon","click",4,"ngIf"],["formControlName","idcategoria"],[3,"value"],["matInput","","type","number","formControlName","costoventa","required",""],["matInput","","type","number","formControlName","valorventa","required",""],["value","",1,"p-3"],["diameter","25"],["fxLayout","row"],[1,"p-3"],["fxLayout","column","fxLayoutAlign","center start"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],[1,"text-secondary"],["matSuffix","",3,"icIcon"],["matSuffix","",3,"icIcon","click"],["fxLayout","row","fxLayout.lt-sm","column","fxLayoutGap","8px","fxLayoutGap.lt-sm","0"],["fxFlex","80"],["href","https://platanitos.com/puma-nova-2-wn-s-negro-morado-171649","target","_blank"],["fxFlex","20"],[1,"b-1"],[1,"mt-4"],["type","file"],[1,"table-hover"],["width","25%"],["width","75%"],[1,"mt-4","mb-1"],["width","100%","height","315","src","https://www.youtube.com/embed/JitOuCe-IjQ","frameborder","0","allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture","allowfullscreen",""]],template:function(e,t){1&e&&(h.Ec(0,D,1,0,"vex-loading",0),h.Ec(1,le,21,10,"form",1)),2&e&&(h.oc("ngIf",t.loading),h.Cb(1),h.oc("ngIf",!t.loading))},directives:[S.p,R.a,i.w,i.q,i.i,v.h,L.c,E.a,L.b,L.a,O.b,v.d,F.a,T.a,j.b,j.a,v.e,v.c,L.d,P.d,P.h,A.b,i.b,i.p,i.g,i.l,i.u,q.a,S.o,Q.c,i.f,Q.a,N.n,P.c,i.s,M.b,P.j],styles:["@media (min-width:600px){.item-form-dialog{width:100%}}@media (min-width:960px){.item-form-dialog{width:620px}}.item-form-dialog .mat-dialog-container{padding:0;margin:0}.item-form-dialog .mat-dialog-content{padding:0 16px;margin:0}.item-form-dialog .mat-dialog-actions{padding:16px 24px;margin:0}.item-form-dialog fieldset{border:1px solid #ccc;border-radius:8px;padding:8px}.item-form-dialog fieldset legend{font-weight:500;padding:0 8px}.item-form-dialog .table-hover{border-collapse:collapse;width:100%}.item-form-dialog .table-hover td{padding:6px 8px}.item-form-dialog .table-hover tr:nth-child(2n){background-color:#f5f5f5}.mat-autocomplete-panel .mat-option{line-height:18px;padding:6px 8px}"],encapsulation:2}),se)},g8hX:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var a=o("IRgW"),i=o("fXoL"),n=o("tk/3"),r=function(){var e=function(e){_inherits(o,e);var t=_createSuper(o);function o(e){var a;return _classCallCheck(this,o),(a=t.call(this)).http=e,a}return _createClass(o,[{key:"index",value:function(e){return this.getQuery("unidades",e)}},{key:"unidades",value:function(e){return this.getQuery("unidades/unidad-medida/empresa",e)}}]),o}(a.a);return e.\u0275fac=function(t){return new(t||e)(i.ac(n.b))},e.\u0275prov=i.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}]);