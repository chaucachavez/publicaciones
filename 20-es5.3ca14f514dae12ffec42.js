function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"6JgD":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("fXoL"),o=i("bv9b"),r=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Kb({type:e,selectors:[["vex-loading"]],decls:1,vars:1,consts:[[3,"mode"]],template:function(e,t){1&e&&n.Rb(0,"mat-progress-bar",0),2&e&&n.oc("mode","indeterminate")},directives:[o.a],styles:[".mat-progress-bar{width:100%}"],encapsulation:2}),e}()},iWjc:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("3Pt+"),o=i("ofXK"),r=i("VX/1"),a=i("cc8n"),c=i("fXoL"),s=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=c.Ob({type:e}),e.\u0275inj=c.Nb({factory:function(t){return new(t||e)},imports:[[a.a,n.k,n.t,o.c,r.b],n.k,n.t,o.c,r.b]}),e}()},kNYd:function(e,t,i){"use strict";i.r(t),i.d(t,"LoginModule",(function(){return z}));var n=i("ofXK"),o=i("tyNb"),r=i("3Pt+"),a=i("uQ9D"),c=i.n(a),s=i("k1zR"),u=i.n(s),l=i("y3Ys"),b=i("nr49"),f=i("fXoL"),d=i("0IaG"),m=i("yCEk"),p=i("YMqD"),v=i("dNgK"),g=i("XiUz"),h=i("kmnG"),y=i("qFsG"),C=i("bTqV"),k=i("Qu3c"),w=i("bSwM"),V=i("6JgD"),_=i("NFeN"),S=i("VX/1"),x=["email"];function I(e,t){1&e&&f.Rb(0,"vex-loading")}function W(e,t){if(1&e&&f.Rb(0,"mat-icon",23),2&e){var i=f.ic();f.oc("icIcon",i.icVisibility)}}function E(e,t){if(1&e&&f.Rb(0,"mat-icon",23),2&e){var i=f.ic();f.oc("icIcon",i.icVisibilityOff)}}var L,G,R,T=function(){return["/recuperar-contrasena"]},F=function(){return["/register"]},N=[{path:"",component:(L=function(){function e(t,i,n,o,r,a){var s=this;if(_classCallCheck(this,e),this.routerActivated=t,this._matDialog=i,this._entidadService=n,this._utils=o,this.router=r,this.snackBar=a,this.inputType="password",this.submitted=!1,this.visible=!1,this.hide=!1,this.icVisibility=c.a,this.icVisibilityOff=u.a,this.routerActivated.params.subscribe((function(e){e.token&&s.verify(e.token)})),localStorage.getItem("tokenPF")){var l=localStorage.getItem("tokenPF").split(" ");this._entidadService.me(l[1]).subscribe((function(e){console.log("Redirigiendo a /inicio",e),s.router.navigate(["/inicio"])}))}}return _createClass(e,[{key:"ngOnInit",value:function(){this.numerodoc=localStorage.getItem("numerodoc")||"44120026",this.loginForm=new r.h({email:new r.e("chaucachavez@gmail.com",[r.v.required,r.v.email]),password:new r.e("a",[r.v.required]),recuerdame:new r.e(!1)}),this.emailElement.nativeElement.focus()}},{key:"verify",value:function(e){var t=this;this._entidadService.verify(e).subscribe((function(e){t.loginForm.get("email").setValue(e.email),setTimeout((function(){t.emailElement.nativeElement.focus()}),0)}),(function(e){var i=t._utils.convertError(e);t.snackBar.open(i,"Cerrar")}))}},{key:"authenticar",value:function(){var e=this,t=this.loginForm.value;t.recuerdame?localStorage.setItem("numerodoc",t.numerodoc):localStorage.removeItem("numerodoc"),this.submitted=!0,this._entidadService.authenticate(t).subscribe((function(t){e.submitted=!1,e.snackBar.open("Sesi\xf3n iniciada","Cerrar"),1===t.user.sedes.length?e.router.navigate(["/inicio"]):e.selectionSede(t.user.sedes)}),(function(t){e.submitted=!1;var i=e._utils.convertError(t);e.snackBar.open(i,"Cerrar",{panelClass:["error-dialog"]})}))}},{key:"selectionSede",value:function(e){var t=this;this._matDialog.open(b.a,{panelClass:"sede-selection-dialog",data:{sedes:e,salir:!0},autoFocus:!1,disableClose:!0}).afterClosed().subscribe((function(e){e&&("string"==typeof e&&"salir"===e?t._entidadService.logout().subscribe((function(){t.snackBar.open("Sesi\xf3n cerrada","Cerrar")}),(function(e){var i=t._utils.convertError(e);t.snackBar.open(i,"Cerrar",{panelClass:["error-dialog"]})})):t.router.navigate(["/inicio"]))}))}},{key:"empresaToken",value:function(e,t){var i=this;this._entidadService.empresaToken({idempresa:e}).subscribe((function(e){console.log(e.token),i._entidadService.refreshToken(e.token),i._entidadService.setSede(t),i.router.navigate(["/inicio"])}),(function(e){var t=i._utils.convertError(e);i.snackBar.open(t,"Cerrar",{panelClass:["error-dialog"]})}))}},{key:"toggleVisibility",value:function(){this.visible?(this.inputType="password",this.visible=!1):(this.inputType="text",this.visible=!0)}}]),e}(),L.\u0275fac=function(e){return new(e||L)(f.Qb(o.a),f.Qb(d.b),f.Qb(m.a),f.Qb(p.a),f.Qb(o.f),f.Qb(v.b))},L.\u0275cmp=f.Kb({type:L,selectors:[["vex-login"]],viewQuery:function(e,t){var i;1&e&&f.Cc(x,!0),2&e&&f.tc(i=f.fc())&&(t.emailElement=i.first)},decls:36,vars:11,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"w-full","h-full","bg-pattern"],[1,"card","overflow-hidden","w-full","max-w-xs"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"p-6","pb-0"],[1,"fill-current","text-center"],["src","assets/img/logos/logo_cuadrado.png",1,"w-20"],[1,"text-center","mt-4"],[1,"title","m-0"],[1,"body-2","text-secondary","m-0"],["fxLayout","column",1,"p-6",3,"formGroup","ngSubmit"],["fxFlex","auto","fxLayout","column"],["fxFlex","grow"],["formControlName","email","matInput","","required",""],["email",""],["formControlName","password","matInput","","required","",3,"type"],["mat-icon-button","","matSuffix","","matTooltip","Toggle Visibility","type","button",3,"click"],[3,"icIcon",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center"],["color","primary",1,"caption"],[1,"caption",3,"routerLink"],["color","primary","mat-raised-button","","type","submit",1,"mt-4",3,"disabled"],[1,"text-secondary","text-center","mt-4"],["color","primary","mat-button","",3,"routerLink"],[3,"icIcon"]],template:function(e,t){1&e&&(f.Wb(0,"div",0),f.Wb(1,"div",1),f.Ec(2,I,1,0,"vex-loading",2),f.Wb(3,"div",3),f.Wb(4,"div",4),f.Rb(5,"img",5),f.Vb(),f.Vb(),f.Wb(6,"div",6),f.Wb(7,"h2",7),f.Gc(8,"Ingresar"),f.Vb(),f.Wb(9,"h4",8),f.Gc(10," Software contable y planillas "),f.Vb(),f.Vb(),f.Wb(11,"form",9),f.ec("ngSubmit",(function(){return t.authenticar()})),f.Wb(12,"div",10),f.Wb(13,"mat-form-field",11),f.Wb(14,"mat-label"),f.Gc(15,"Correo"),f.Vb(),f.Rb(16,"input",12,13),f.Vb(),f.Wb(18,"mat-form-field",11),f.Wb(19,"mat-label"),f.Gc(20,"Contrase\xf1a"),f.Vb(),f.Rb(21,"input",14),f.Wb(22,"button",15),f.ec("click",(function(){return t.toggleVisibility()})),f.Ec(23,W,1,1,"mat-icon",16),f.Ec(24,E,1,1,"mat-icon",16),f.Vb(),f.Vb(),f.Vb(),f.Wb(25,"div",17),f.Wb(26,"mat-checkbox",18),f.Gc(27,"Recu\xe9rdame"),f.Vb(),f.Wb(28,"a",19),f.Gc(29,"\xbfHas olvidado tu contrase\xf1a?"),f.Vb(),f.Vb(),f.Wb(30,"button",20),f.Gc(31," INGRESAR "),f.Vb(),f.Wb(32,"p",21),f.Gc(33," \xbfA\xfan no tienes una cuenta? "),f.Vb(),f.Wb(34,"a",22),f.Gc(35,"CREAR CUENTA"),f.Vb(),f.Vb(),f.Vb(),f.Vb()),2&e&&(f.Cb(1),f.oc("@fadeInUp",void 0),f.Cb(1),f.oc("ngIf",t.submitted),f.Cb(9),f.oc("formGroup",t.loginForm),f.Cb(10),f.oc("type",t.inputType),f.Cb(2),f.oc("ngIf",t.visible),f.Cb(1),f.oc("ngIf",!t.visible),f.Cb(4),f.oc("routerLink",f.pc(9,T)),f.Cb(2),f.oc("disabled",t.loginForm.invalid||t.submitted),f.Cb(4),f.oc("routerLink",f.pc(10,F)))},directives:[g.c,g.b,n.p,r.w,r.q,r.i,g.a,h.d,h.h,r.b,y.b,r.p,r.g,r.u,C.b,h.j,k.a,w.a,o.i,C.a,V.a,_.a,S.a],styles:[""],data:{animation:[l.a]}}),L)}],A=((G=function e(){_classCallCheck(this,e)}).\u0275mod=f.Ob({type:G}),G.\u0275inj=f.Nb({factory:function(e){return new(e||G)},imports:[[o.j.forChild(N)],o.j]}),G),Q=i("cc8n"),j=i("iWjc"),z=((R=function e(){_classCallCheck(this,e)}).\u0275mod=f.Ob({type:R}),R.\u0275inj=f.Nb({factory:function(e){return new(e||R)},imports:[[n.c,A,Q.a,j.a]]}),R)},uQ9D:function(e,t){t.__esModule=!0,t.default={body:'<path opacity=".3" d="M12 6a9.77 9.77 0 0 0-8.82 5.5C4.83 14.87 8.21 17 12 17s7.17-2.13 8.82-5.5A9.77 9.77 0 0 0 12 6zm0 10c-2.48 0-4.5-2.02-4.5-4.5S9.52 7 12 7s4.5 2.02 4.5 4.5S14.48 16 12 16z" fill="currentColor"/><path d="M12 4C7 4 2.73 7.11 1 11.5C2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 13a9.77 9.77 0 0 1-8.82-5.5C4.83 8.13 8.21 6 12 6s7.17 2.13 8.82 5.5A9.77 9.77 0 0 1 12 17zm0-10c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7zm0 7a2.5 2.5 0 0 1 0-5a2.5 2.5 0 0 1 0 5z" fill="currentColor"/>',width:24,height:24}}}]);