(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"6JgD":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var o=i("fXoL"),n=i("bv9b");let r=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["vex-loading"]],decls:1,vars:1,consts:[[3,"mode"]],template:function(t,e){1&t&&o.Rb(0,"mat-progress-bar",0),2&t&&o.oc("mode","indeterminate")},directives:[n.a],styles:[".mat-progress-bar{width:100%}"],encapsulation:2}),t})()},iWjc:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var o=i("3Pt+"),n=i("ofXK"),r=i("VX/1"),a=i("cc8n"),s=i("fXoL");let c=(()=>{class t{}return t.\u0275mod=s.Ob({type:t}),t.\u0275inj=s.Nb({factory:function(e){return new(e||t)},imports:[[a.a,o.k,o.t,n.c,r.b],o.k,o.t,n.c,r.b]}),t})()},kNYd:function(t,e,i){"use strict";i.r(e),i.d(e,"LoginModule",(function(){return A}));var o=i("ofXK"),n=i("tyNb"),r=i("3Pt+"),a=i("uQ9D"),s=i.n(a),c=i("k1zR"),l=i.n(c),u=i("y3Ys"),b=i("nr49"),d=i("fXoL"),m=i("0IaG"),f=i("yCEk"),p=i("YMqD"),h=i("dNgK"),g=i("XiUz"),v=i("kmnG"),y=i("qFsG"),C=i("bTqV"),w=i("Qu3c"),k=i("bSwM"),V=i("6JgD"),S=i("NFeN"),x=i("VX/1");const I=["email"];function W(t,e){1&t&&d.Rb(0,"vex-loading")}function _(t,e){if(1&t&&d.Rb(0,"mat-icon",23),2&t){const t=d.ic();d.oc("icIcon",t.icVisibility)}}function E(t,e){if(1&t&&d.Rb(0,"mat-icon",23),2&t){const t=d.ic();d.oc("icIcon",t.icVisibilityOff)}}const L=function(){return["/recuperar-contrasena"]},G=function(){return["/register"]},R=[{path:"",component:(()=>{class t{constructor(t,e,i,o,n,r){if(this.routerActivated=t,this._matDialog=e,this._entidadService=i,this._utils=o,this.router=n,this.snackBar=r,this.inputType="password",this.submitted=!1,this.visible=!1,this.hide=!1,this.icVisibility=s.a,this.icVisibilityOff=l.a,this.routerActivated.params.subscribe(t=>{t.token&&this.verify(t.token)}),localStorage.getItem("tokenPF")){const t=localStorage.getItem("tokenPF").split(" ");this._entidadService.me(t[1]).subscribe(t=>{console.log("Redirigiendo a /inicio",t),this.router.navigate(["/inicio"])})}}ngOnInit(){this.numerodoc=localStorage.getItem("numerodoc")||"44120026",this.loginForm=new r.h({email:new r.e("chaucachavez@gmail.com",[r.v.required,r.v.email]),password:new r.e("a",[r.v.required]),recuerdame:new r.e(!1)}),this.emailElement.nativeElement.focus()}verify(t){this._entidadService.verify(t).subscribe(t=>{this.loginForm.get("email").setValue(t.email),setTimeout(()=>{this.emailElement.nativeElement.focus()},0)},t=>{const e=this._utils.convertError(t);this.snackBar.open(e,"Cerrar")})}authenticar(){const t=this.loginForm.value;t.recuerdame?localStorage.setItem("numerodoc",t.numerodoc):localStorage.removeItem("numerodoc"),this.submitted=!0,this._entidadService.authenticate(t).subscribe(t=>{this.submitted=!1,this.snackBar.open("Sesi\xf3n iniciada","Cerrar"),1===t.user.sedes.length?this.router.navigate(["/inicio"]):this.selectionSede(t.user.sedes)},t=>{this.submitted=!1;const e=this._utils.convertError(t);this.snackBar.open(e,"Cerrar",{panelClass:["error-dialog"]})})}selectionSede(t){this._matDialog.open(b.a,{panelClass:"sede-selection-dialog",data:{sedes:t,salir:!0},autoFocus:!1,disableClose:!0}).afterClosed().subscribe(t=>{t&&("string"==typeof t&&"salir"===t?this._entidadService.logout().subscribe(()=>{this.snackBar.open("Sesi\xf3n cerrada","Cerrar")},t=>{const e=this._utils.convertError(t);this.snackBar.open(e,"Cerrar",{panelClass:["error-dialog"]})}):this.router.navigate(["/inicio"]))})}empresaToken(t,e){this._entidadService.empresaToken({idempresa:t}).subscribe(t=>{console.log(t.token),this._entidadService.refreshToken(t.token),this._entidadService.setSede(e),this.router.navigate(["/inicio"])},t=>{const e=this._utils.convertError(t);this.snackBar.open(e,"Cerrar",{panelClass:["error-dialog"]})})}toggleVisibility(){this.visible?(this.inputType="password",this.visible=!1):(this.inputType="text",this.visible=!0)}}return t.\u0275fac=function(e){return new(e||t)(d.Qb(n.a),d.Qb(m.b),d.Qb(f.a),d.Qb(p.a),d.Qb(n.f),d.Qb(h.b))},t.\u0275cmp=d.Kb({type:t,selectors:[["vex-login"]],viewQuery:function(t,e){var i;1&t&&d.Cc(I,!0),2&t&&d.tc(i=d.fc())&&(e.emailElement=i.first)},decls:36,vars:11,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"w-full","h-full","bg-pattern"],[1,"card","overflow-hidden","w-full","max-w-xs"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"p-6","pb-0"],[1,"fill-current","text-center"],["src","assets/img/logos/logo_cuadrado.png",1,"w-20"],[1,"text-center","mt-4"],[1,"title","m-0"],[1,"body-2","text-secondary","m-0"],["fxLayout","column",1,"p-6",3,"formGroup","ngSubmit"],["fxFlex","auto","fxLayout","column"],["fxFlex","grow"],["formControlName","email","matInput","","required",""],["email",""],["formControlName","password","matInput","","required","",3,"type"],["mat-icon-button","","matSuffix","","matTooltip","Toggle Visibility","type","button",3,"click"],[3,"icIcon",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center"],["color","primary",1,"caption"],[1,"caption",3,"routerLink"],["color","primary","mat-raised-button","","type","submit",1,"mt-4",3,"disabled"],[1,"text-secondary","text-center","mt-4"],["color","primary","mat-button","",3,"routerLink"],[3,"icIcon"]],template:function(t,e){1&t&&(d.Wb(0,"div",0),d.Wb(1,"div",1),d.Ec(2,W,1,0,"vex-loading",2),d.Wb(3,"div",3),d.Wb(4,"div",4),d.Rb(5,"img",5),d.Vb(),d.Vb(),d.Wb(6,"div",6),d.Wb(7,"h2",7),d.Gc(8,"Ingresar"),d.Vb(),d.Wb(9,"h4",8),d.Gc(10," Software contable y planillas "),d.Vb(),d.Vb(),d.Wb(11,"form",9),d.ec("ngSubmit",(function(){return e.authenticar()})),d.Wb(12,"div",10),d.Wb(13,"mat-form-field",11),d.Wb(14,"mat-label"),d.Gc(15,"Correo"),d.Vb(),d.Rb(16,"input",12,13),d.Vb(),d.Wb(18,"mat-form-field",11),d.Wb(19,"mat-label"),d.Gc(20,"Contrase\xf1a"),d.Vb(),d.Rb(21,"input",14),d.Wb(22,"button",15),d.ec("click",(function(){return e.toggleVisibility()})),d.Ec(23,_,1,1,"mat-icon",16),d.Ec(24,E,1,1,"mat-icon",16),d.Vb(),d.Vb(),d.Vb(),d.Wb(25,"div",17),d.Wb(26,"mat-checkbox",18),d.Gc(27,"Recu\xe9rdame"),d.Vb(),d.Wb(28,"a",19),d.Gc(29,"\xbfHas olvidado tu contrase\xf1a?"),d.Vb(),d.Vb(),d.Wb(30,"button",20),d.Gc(31," INGRESAR "),d.Vb(),d.Wb(32,"p",21),d.Gc(33," \xbfA\xfan no tienes una cuenta? "),d.Vb(),d.Wb(34,"a",22),d.Gc(35,"CREAR CUENTA"),d.Vb(),d.Vb(),d.Vb(),d.Vb()),2&t&&(d.Cb(1),d.oc("@fadeInUp",void 0),d.Cb(1),d.oc("ngIf",e.submitted),d.Cb(9),d.oc("formGroup",e.loginForm),d.Cb(10),d.oc("type",e.inputType),d.Cb(2),d.oc("ngIf",e.visible),d.Cb(1),d.oc("ngIf",!e.visible),d.Cb(4),d.oc("routerLink",d.pc(9,L)),d.Cb(2),d.oc("disabled",e.loginForm.invalid||e.submitted),d.Cb(4),d.oc("routerLink",d.pc(10,G)))},directives:[g.c,g.b,o.p,r.w,r.q,r.i,g.a,v.d,v.h,r.b,y.b,r.p,r.g,r.u,C.b,v.j,w.a,k.a,n.i,C.a,V.a,S.a,x.a],styles:[""],data:{animation:[u.a]}}),t})()}];let F=(()=>{class t{}return t.\u0275mod=d.Ob({type:t}),t.\u0275inj=d.Nb({factory:function(e){return new(e||t)},imports:[[n.j.forChild(R)],n.j]}),t})();var N=i("cc8n"),T=i("iWjc");let A=(()=>{class t{}return t.\u0275mod=d.Ob({type:t}),t.\u0275inj=d.Nb({factory:function(e){return new(e||t)},imports:[[o.c,F,N.a,T.a]]}),t})()},uQ9D:function(t,e){e.__esModule=!0,e.default={body:'<path opacity=".3" d="M12 6a9.77 9.77 0 0 0-8.82 5.5C4.83 14.87 8.21 17 12 17s7.17-2.13 8.82-5.5A9.77 9.77 0 0 0 12 6zm0 10c-2.48 0-4.5-2.02-4.5-4.5S9.52 7 12 7s4.5 2.02 4.5 4.5S14.48 16 12 16z" fill="currentColor"/><path d="M12 4C7 4 2.73 7.11 1 11.5C2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 13a9.77 9.77 0 0 1-8.82-5.5C4.83 8.13 8.21 6 12 6s7.17 2.13 8.82 5.5A9.77 9.77 0 0 1 12 17zm0-10c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7zm0 7a2.5 2.5 0 0 1 0-5a2.5 2.5 0 0 1 0 5z" fill="currentColor"/>',width:24,height:24}}}]);